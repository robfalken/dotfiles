{"id":"b3784031-ac78-4d86-8e3a-9fc6eec1fb46","zed":"context","version":"0.4.0","text":"\n\n\nIn Postgres, how do I query configuration->>'custom_domain' if it's not empty, and otherwise configuration->>'default_domain' and if both are empty, fall back to 'example.com'?\nIn PostgreSQL, you can use COALESCE with NULLIF to achieve this. Here's how:\n\n```sql\nSELECT COALESCE(\n    NULLIF(configuration->>'custom_domain', ''),\n    NULLIF(configuration->>'default_domain', ''),\n    'example.com'\n) as domain\nFROM your_table\n```\n\nThis will:\n1. First try `configuration->>'custom_domain'` (if it's not empty)\n2. Then try `configuration->>'default_domain'` (if it's not empty)\n3. Finally fall back to 'example.com' if both are empty or NULL\n\nThe NULLIF function converts empty strings to NULL, which allows COALESCE to skip them and move to the next option.\n","messages":[{"id":{"replica_id":0,"value":0},"start":0,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":74}}},{"id":{"replica_id":0,"value":53},"start":180,"metadata":{"role":"assistant","status":"Done","timestamp":{"replica_id":0,"value":75}}},{"id":{"replica_id":0,"value":54},"start":758,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":76}}}],"summary":"Domain Fallback Query in Postgres","slash_command_output_sections":[{"range":{"start":0,"end":1},"icon":"Library","label":"Default","metadata":null}]}